title: mongo_sampler_0
testclass: mongo  # 取样器类型
variables:
  name: ryze_${timestamp('yyyy-MM-dd HH:mm:ss')}
preprocessors: # 前置处理器
  - testclass: mongo_preprocessor
    config: # 取样器配置  # 数据源，可空
      url: 'mongodb://root:123456@127.0.0.1:27017/?authSource=admin' # 可空，空值时,使用 datasource 中的 url
      database: 'demo' # 数据库名称，可空，空值时，使用 datasource 中的 database
      collection: 'book' # 表名，可空，空值时，使用 datasource 中的 collection
      action: insert  # 操作类型：find、insert、update、delete
      data: { name: '${name}', author: 'ryze', isbn: '${random(10)}' } # 条件，非空
config: # 取样器配置  # 数据源，可空
  url: 'mongodb://root:123456@127.0.0.1:27017/?authSource=admin' # 可空，空值时,使用 datasource 中的 url
  database: 'demo' # 数据库名称，可空，空值时，使用 datasource 中的 database
  collection: 'book' # 表名，可空，空值时，使用 datasource 中的 collection
  action: find  # 操作类型：find、insert、update、delete
  condition: { name: { $eq: '${name}' } } # 条件，非空
validators:
  - { testclass: json, field: '$.name', expected: '${name}', rule: 'equals' }